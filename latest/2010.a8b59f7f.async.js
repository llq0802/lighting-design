(self.webpackChunklighting_design=self.webpackChunklighting_design||[]).push([[2010],{45367:function(ln,Se,l){"use strict";var to=l(97857),E=l.n(to),lo=l(5574),o=l.n(lo),ao=l(13769),oe=l.n(ao),ro=l(80882),Re=l(22638),so=l(9361),Ae=l(48997),uo=l(71230),ne=l(15746),io=l(42075),V=l(93967),pe=l.n(V),Oe=l(89889),co=l(61117),vo=l(40964),be=l(67294),K=l(85893),X=l(91874),q=l.n(X);l.o(X,"excel2Json")&&l.d(Se,{excel2Json:function(){return X.excel2Json}}),l.o(X,"getExcelData")&&l.d(Se,{getExcelData:function(){return X.getExcelData}}),l.o(X,"json2Excel")&&l.d(Se,{json2Excel:function(){return X.json2Excel}});var te=["layout","submitter","isCollapsed","isEnterSubmit","isApproachLastItem","isSpace","showColsNumber","className","formItemBottom","itemColProps","gutter","onCollapsedChange"],f=["ownColSpans"],mo=so.Z.useToken,ie=Ae.Z.Link,Ee="lightd-form-query",J={xs:24,sm:24,md:12,lg:8,xl:8,xxl:6},fo={display:"flex",flex:"1",flexWrap:"wrap"},d=(0,be.memo)(function(z){var le=z.collapsed,k=z.onToggle,$=(0,Re.Z)(function(){k==null||k(!le)}),De=mo(),de=De.token;return(0,K.jsxs)(ie,{onClick:$,className:"".concat(Ee,"-collapse"),style:{whiteSpace:"nowrap",color:de==null?void 0:de.colorPrimary,display:"flex",justifyContent:"center",alignItems:"center"},children:[le?"\u5C55\u5F00":"\u6536\u8D77",(0,K.jsx)(ro.Z,{style:{marginLeft:5,transition:"0.3s all",transform:"rotate(".concat(le?0:180,"deg)")}})]})});function ho(z){var le=z.layout,k=le===void 0?"horizontal":le,$=z.submitter,De=z.isCollapsed,de=De===void 0?!0:De,ce=z.isEnterSubmit,ze=ce===void 0?!0:ce,Ke=z.isApproachLastItem,go=Ke===void 0?!1:Ke,Ne=z.isSpace,yo=Ne===void 0?!1:Ne,xe=z.showColsNumber,Co=z.className,Ze=z.formItemBottom,$e=z.itemColProps,So=$e===void 0?vo.FD:$e,He=z.gutter,Ro=He===void 0?16:He,Ie=z.onCollapsedChange,po=oe()(z,te),bo=yo||k==="inline",Do=(0,be.useState)(de),Le=o()(Do,2),We=Le[0],Po=Le[1];return(0,K.jsx)(Oe.Z,E()({formItemBottom:Ze,isEnterSubmit:ze,layout:k,submitter:$===void 0||$?E()(E()({submitText:"\u67E5\u8BE2"},$),{},{submitButtonProps:E()(E()({},$==null?void 0:$.submitButtonProps),{},{htmlType:ze?"submit":"button"})}):!1,className:pe()(Ee,Co),contentRender:function(ae,Eo){var Ue=typeof xe=="number"&&xe<(ae==null?void 0:ae.length),Ve=bo?{}:E()(E()({},J),So);return(0,K.jsxs)(uo.Z,{gutter:Ro,children:[(0,K.jsx)(K.Fragment,{children:ae==null?void 0:ae.map(function(_,ve){var Je=_.props,qe=Je.ownColSpans,xo=qe===void 0?{}:qe,Io=oe()(Je,f),Ye=We&&Ue&&ve>=xe;return(0,K.jsx)(ne.Z,E()(E()(E()({},Ve),xo),{},{style:Ye?{display:"none"}:{},children:(0,be.cloneElement)(_,E()({hidden:Ye},Io))}),(_==null?void 0:_.key)||_.name+ve.toString())})}),(0,K.jsx)(K.Fragment,{children:$!==!1&&(0,K.jsx)(ne.Z,{style:E()(E()({},fo),{},{alignItems:k==="vertical"?"flex-end":"flex-start",justifyContent:"flex-".concat(go?"start":"end")}),children:(0,K.jsx)(co.default,{colon:!1,className:pe()("".concat(Ee,"-submitter")),style:E()({marginBottom:Ze},$?$==null?void 0:$.style:{}),children:(0,K.jsxs)(io.Z,{children:[Eo,Ue&&(0,K.jsx)(d,{collapsed:We,onToggle:function(ve){Po(ve),Ie==null||Ie(ve)}})]})})})})]})}},po))}Se.default=ho},91874:function(){},2010:function(ln,Se,l){"use strict";l.d(Se,{F:function(){return x},Z:function(){return hn}});var to=l(9783),E=l.n(to),lo=l(97857),o=l.n(lo),ao=l(5574),oe=l.n(ao),ro=l(15009),Re=l.n(ro),so=l(99289),Ae=l.n(so),uo=l(13769),ne=l.n(uo),io=l(28699),V=l(22638),pe=l(42075),Oe=l(4393),co=l(10237),vo=l(75081),be=l(28459),K=l(81354),X=l(93967),q=l.n(X),te=l(40964),f=l(67294),mo=(0,f.createContext)({}),ie=mo,Ee=l(45367),J=l(33168),fo=l(4390),d=l(85893),ho=["formItems","cardProps","name","loading","isReady","submitter"],z=(0,f.forwardRef)(function(n,e){var t,s,i,a,m=n.formItems,u=m===void 0?[]:m,r=n.cardProps,v=n.name,g=n.loading,M=n.isReady,y=n.submitter,P=ne()(n,ho),I=fo.Z.useForm(),A=oe()(I,1),h=A[0];(0,f.useImperativeHandle)(e,function(){return h});var F=(0,f.useMemo)(function(){return v||(0,J.EL)("lightd-table-search-form")},[v]),S=(0,f.useMemo)(function(){return(u==null?void 0:u.length)<=0?[]:u==null?void 0:u.map(function(B,R){var c,N;return(0,f.cloneElement)(B,{key:(B==null?void 0:B.key)||(B==null||(c=B.props)===null||c===void 0?void 0:c.key)||(B==null||(N=B.props)===null||N===void 0?void 0:N.name)+R.toString()})})},[u]);if((u==null?void 0:u.length)<=0)return null;var p=J.Jj?{styles:o()(o()({},r==null?void 0:r.styles),{},{body:o()({paddingBottom:0},(t=r==null?void 0:r.bodyStyle)!==null&&t!==void 0?t:r==null||(s=r.styles)===null||s===void 0?void 0:s.body)})}:{bodyStyle:o()({paddingBottom:0},(i=r==null?void 0:r.bodyStyle)!==null&&i!==void 0?i:r==null||(a=r.styles)===null||a===void 0?void 0:a.body)};return(0,d.jsx)(Oe.Z,o()(o()(o()({bordered:!1},r),{},{className:q()("".concat(x,"-form-card"),r==null?void 0:r.className),style:o()({marginBottom:16},r==null?void 0:r.style)},p),{},{children:(0,d.jsx)(Ee.default,o()(o()({form:h,name:F,loading:g,isReady:M},P),{},{submitter:y===void 0||y?o()(o()({},y),{},{resetButtonProps:o()({disabled:g||!M},y==null?void 0:y.resetButtonProps),submitButtonProps:o()({loading:!1,disabled:g||!M},y==null?void 0:y.submitButtonProps)}):!1,children:S}))}))}),le=z,k=l(33160),$=l(11713),De=l(27732),de=l(19632),ce=l.n(de),ze=l(42952),Ke=l(74627),go=l(84567),Ne=l(20863),yo=function(e){var t=e.onColumnIconChange,s=(0,f.useContext)(ie),i=s.outColumns,a=i===void 0?[]:i,m=s.columnKeys,u=m===void 0?[]:m,r=s.setColumnKeys,v=(0,f.useMemo)(function(){return a.map(function(I,A){return{key:(0,J.hW)(I,A),title:I.title||""}})},[a]),g=(0,f.useMemo)(function(){return u.length>0&&u.length!==a.length},[u,a]),M=(0,f.useMemo)(function(){return u.length===a.length},[u,a]),y=(0,V.Z)(function(I){r(ce()(I)),t==null||t(ce()(I))}),P=(0,V.Z)(function(I){if(I.target.checked){var A=a.map(J.hW);r(A)}else r([])});return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(Ke.Z,{title:(0,d.jsx)(go.Z,{indeterminate:g,onChange:P,checked:M,style:{height:"32px",lineHeight:"32px"},children:"\u5168\u9009"}),content:(0,d.jsx)(Ne.Z,{checkable:!0,selectable:!1,blockNode:!0,onCheck:y,treeData:v,checkedKeys:u,className:"".concat(x,"-column-setting-tree")}),arrow:!1,placement:"bottomRight",trigger:["click"],overlayClassName:"".concat(x,"-column-setting-overlay"),children:(0,d.jsx)(ze.Z,{title:"\u5217\u8BBE\u7F6E"})})})},xe=yo,Co=l(68869),Ze=l(83159),$e=[{label:"\u9ED8\u8BA4",key:"large"},{label:"\u4E2D\u7B49",key:"middle"},{label:"\u7D27\u51D1",key:"small"}],So=function(e){var t=e.onDensityIconChange,s=(0,f.useContext)(ie),i=s.size,a=s.setSize;return(0,d.jsx)(Ze.Z,{overlayClassName:"".concat(x,"-density-icon-overlay"),placement:"bottom",trigger:["click"],menu:{style:{width:80},selectedKeys:[i||"large"],onClick:function(u){var r=u.key;a==null||a(r),t==null||t(r)},items:$e},children:(0,d.jsx)(Co.Z,{title:"\u8868\u683C\u5BC6\u5EA6"})})},He=So,Ro=["showReload","showColumnSetting","showDensity","showFullscreen","orders","onReloadIconChange","onColumnIconChange","onDensityIconChange","onFullscreenIconChange","render","style"],Ie=["onMouseEnter","onMouseLeave"],po=function(e){var t=e.onReloadIconChange,s=(0,f.useContext)(ie),i=s.reload;return(0,d.jsx)(k.Z,{title:"\u5237\u65B0\u8868\u683C",onClick:function(){i==null||i(),t==null||t()}})},bo=function(e){var t=e.onFullscreenIconChange,s=(0,f.useContext)(ie),i=s.toggleFullscreen,a=s.isFullScreen;return(0,d.jsx)(d.Fragment,{children:a?(0,d.jsx)($.Z,{title:"\u9000\u51FA\u5168\u5C4F",onClick:function(){i(),t==null||t(!1)}}):(0,d.jsx)(De.Z,{title:"\u8FDB\u5165\u5168\u5C4F",onClick:function(){i(),t==null||t(!0)}})})},Do=function(e){var t=e.showReload,s=t===void 0?!0:t,i=e.showColumnSetting,a=i===void 0?!0:i,m=e.showDensity,u=m===void 0?!0:m,r=e.showFullscreen,v=r===void 0?!0:r,g=e.orders,M=g===void 0?{reload:0,density:1,fullscreen:2,columnSetting:3}:g,y=e.onReloadIconChange,P=e.onColumnIconChange,I=e.onDensityIconChange,A=e.onFullscreenIconChange,h=e.render,F=e.style,S=F===void 0?te.FD:F,p=ne()(e,Ro),B=(0,f.useMemo)(function(){var R=[];return s&&R.push({key:M.reload||0,dom:(0,d.jsx)(po,{onReloadIconChange:y},"ReloadIcon")}),u&&R.push({key:M.density||1,dom:(0,d.jsx)(He,{onDensityIconChange:I},"DensityIcon")}),v&&R.push({key:M.fullscreen||2,dom:(0,d.jsx)(bo,{onFullscreenIconChange:A},"FullscreenIcon")}),a&&R.push({key:M.columnSetting||3,dom:(0,d.jsx)(xe,{onColumnIconChange:P},"ColumnSetting")}),R.toSorted(function(c,N){return c.key-N.key}).map(function(c){return c.dom})},[s,u,v,a,JSON.stringify(M)]);return(0,d.jsx)(pe.Z,o()(o()({size:10},p),{},{style:o()({fontSize:16},S),children:h?h==null?void 0:h(B):B}))},Le=function(e,t){return(0,d.jsx)("span",{className:"".concat(x,"-pagination-show-total"),children:"\u5F53\u524D\u663E\u793A".concat(t[0],"-").concat(t[1],"\u6761\uFF0C\u5171 ").concat(e," \u6761\u6570\u636E")})},We=function(e){var t=e.onMouseEnter,s=e.onMouseLeave,i=ne()(e,Ie);return(0,d.jsx)("td",o()({},i))},Po=Do,Fo=l(27347),ae=l(47811),Eo=l(42170),Ue=l(15479),Ve=l(37514),_=l(22028),ve=["data"];function Je(n){var e=n.tablecardref,t=n.fillSpace,s=n.tableData;(0,f.useLayoutEffect)(function(){if(t!==void 0&&e.current){var i=e.current,a=i==null?void 0:i.querySelector("div.ant-table");if(a){if(t!==!0&&typeof t!="number"){a.style.height="auto";return}var m,u=t===!0?1:t+1,r=a.getBoundingClientRect(),v=r.bottom,g=r.height,M=i.getBoundingClientRect(),y=M.bottom,P=window.innerHeight-v;P<=0||(P-u>0?m=P+g-u-(y-v):m=P+g-(y-v),a.style.height="".concat(Math.floor(m),"px"),a.style.overflow="auto")}}},[t,s==null?void 0:s.length])}function qe(n){var e=(0,Fo.Z)(function(){return n}),t=oe()(e,2),s=t[0],i=t[1];return(0,ae.Z)(function(){return i(n)},[n]),[s,i]}function xo(n){var e=n.contentRender,t=n.isSort,s=n.paginationAction,i=n.columns,a=n.toolbarActionConfig,m=n.headerCellStyle,u=n.cellStyle,r=s.current,v=s.pageSize,g=(0,f.useMemo)(function(){if(e)return[];var h=i||[];if(t){var F=s.current,S=s.pageSize,p=function(c,N,H){var C,O=(F-1)*(S||0)+H+1;return(0,J.mf)(t==null?void 0:t.render)?t==null||(C=t.render)===null||C===void 0?void 0:C.call(t,O,c,N,H):O},B=o()(o()({title:"\u5E8F\u53F7",align:"center",width:80},(0,Ve.Z)(t)?t:{}),{},{render:p,dataIndex:"_LTABLE_SERIAL_NUMNER_COLUMN_"});h=[B].concat(ce()(i))}return h.map(function(R){var c=o()(o()({},R),{},{onHeaderCell:function(H){var C,O=(R==null||(C=R.onHeaderCell)===null||C===void 0?void 0:C.call(R,H))||{},Z=typeof m=="function"?m(H):m;return o()(o()({},O),{},{style:o()(o()({},O==null?void 0:O.style),Z),className:q()("".concat(x,"-header-cell"),O==null?void 0:O.className)})},onCell:function(H,C){var O,Z=(R==null||(O=R.onCell)===null||O===void 0?void 0:O.call(R,H,C))||{},me=typeof u=="function"?u(H,C):u;return o()(o()({},Z),{},{style:o()(o()({},Z==null?void 0:Z.style),me),className:q()("".concat(x,"-cell"),Z==null?void 0:Z.className)})}});return c.toolTip&&!c.ellipsis?o()(o()({},c),{},{ellipsis:{showTitle:!1},render:function(H,C,O){var Z,me,Ge=(Z=(me=C==null?void 0:C[c==null?void 0:c.dataIndex])!==null&&me!==void 0?me:H)!==null&&Z!==void 0?Z:O;return(0,d.jsx)(Tooltip,o()(o()({placement:"topLeft",title:Ge},(0,Ve.Z)(c.toolTip)?c.toolTip:{}),{},{children:c!=null&&c.render?c==null?void 0:c.render(H,C,O):Ge}))}}):c})},[i,t?r:void 0,t?v:void 0]),M=(0,Fo.Z)(function(){return e||a===!1||!(a!=null&&a.showColumnSetting)?[]:g.map(J.hW)}),y=oe()(M,2),P=y[0],I=y[1];(0,Eo.Z)(function(){if(!e){if(a===!1||!(a!=null&&a.showColumnSetting)){I([]);return}I(g.map(J.hW))}},[g]);var A=(0,f.useMemo)(function(){if(e)return[];if(a===!1||!(a!=null&&a.showColumnSetting))return g;var h=g.filter(function(F,S){return P==null?void 0:P.includes((0,J.hW)(F,S))});return h},[P,typeof a=="boolean"&&a,typeof a!="boolean"&&(a==null?void 0:a.showColumnSetting)]);return{finalColumns:A,columnKeys:P,setColumnKeys:I,outColumns:g}}function Io(n){var e=(0,f.useMemo)(function(){return n&&n.defaultCurrent||1},[]),t=(0,f.useMemo)(function(){return n&&n.defaultPageSize||10},[]);return{outDefaultCurrent:e,outDefaultPageSize:t}}function Ye(n,e){return(0,f.useMemo)(function(){return e===void 0?{spinning:n}:typeof e=="boolean"?{spinning:e}:o()({spinning:n},e)},[typeof e=="boolean"?e:e==null?void 0:e.spinning,n])}function an(n){var e=typeof n=="boolean"?!1:(0,_.Z)(n,["split"]);return(0,f.useMemo)(function(){return n?o()({showReload:!0,showColumnSetting:!0,showDensity:!0,showFullscreen:!0},n):!1},[JSON.stringify(e)])}function rn(n){var e=n.hasDataSource,t=n.request,s=n.requestOptions,i=n.requestCacheKey,a=n.requestBefore,m=n.requestSuccess,u=n.requestFirstSuccess,r=n.requestFinally,v=n.outDefaultCurrent,g=n.outDefaultPageSize,M=(0,f.useRef)(!0),y=(0,Ue.Z)(Ae()(Re()().mark(function A(){var h,F,S,p,B,R,c,N=arguments;return Re()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:if(!e){C.next=2;break}return C.abrupt("return",{list:[],total:0});case 2:for(h=N.length,F=new Array(h),S=0;S<h;S++)F[S]=N[S];return p=F[0],B=F[1],R=F.slice(2),C.next=6,t.apply(void 0,[o()(o()({},p),a?a==null?void 0:a.apply(void 0,F):{}),B].concat(ce()(R)));case 6:if(c=C.sent,!(c!=null&&c.success&&Array.isArray(c.data)&&c.data.length)){C.next=9;break}return C.abrupt("return",{list:c.data,total:+c.total});case 9:return C.abrupt("return",{list:[],total:0});case 10:case"end":return C.stop()}},A)})),o()(o()({defaultCurrent:v,defaultPageSize:g,cacheKey:i},s),{},{manual:!0,onSuccess:function(){for(var h,F=arguments.length,S=new Array(F),p=0;p<F;p++)S[p]=arguments[p];M.current&&(u==null||u.apply(void 0,S)),M.current=!1,m==null||m.apply(void 0,S),s==null||(h=s.onSuccess)===null||h===void 0||h.call.apply(h,[s].concat(S))},onFinally:function(){for(var h,F=arguments.length,S=new Array(F),p=0;p<F;p++)S[p]=arguments[p];r==null||r.apply(void 0,S),s==null||(h=s.onFinally)===null||h===void 0||h.call.apply(h,[s].concat(S))}})),P=y.data,I=ne()(y,ve);return o()({data:P||{list:[],total:0}},I)}function sn(n){var e=n.autoRequest,t=n.isReady,s=n.hasDataSource,i=n.outDefaultCurrent,a=n.outDefaultPageSize,m=n.hasFromItems,u=n.outRequestCacheKey,r=n.requestCacheParams,v=n.requestOptions,g=n.defaultRequestParams,M=n.run,y=n.queryFormRef;(0,f.useEffect)(function(){if(!(!e||!t||s)){var P,I=i,A=a;if(m){var h;P=(h=y.current)===null||h===void 0?void 0:h.getFieldsValue()}var F=u||(v==null?void 0:v.cacheKey);if(F&&r[0]){var S=r[0],p=S.current,B=S.pageSize,R=S.formValues;if(I=p,A=B,m&&R){var c;P=R,(c=y.current)===null||c===void 0||c.setFieldsValue(o()({},R))}}M(o()(o()({},g),{},{current:I,pageSize:A,formValues:P}),"onInit")}},[t])}function un(n){var e=n.onHeaderRow,t=n.headerRowStyle,s=n.showHorizontalBorder,i=function(){for(var m=arguments.length,u=new Array(m),r=0;r<m;r++)u[r]=arguments[r];var v=typeof e=="function"?e.apply(void 0,u):{},g=typeof t=="function"?t==null?void 0:t.apply(void 0,u):t;return o()(o()({},v),{},{className:q()("".concat(x,"-header-row"),E()({},"".concat(x,"-header-row-border-none"),!s),v==null?void 0:v.className),style:o()(o()({},v==null?void 0:v.style),g)})};return i}function dn(n){var e=n.onRow,t=n.rowStyle,s=function(){for(var a=arguments.length,m=new Array(a),u=0;u<a;u++)m[u]=arguments[u];var r=typeof e=="function"?e.apply(void 0,m):{},v=typeof t=="function"?t==null?void 0:t.apply(void 0,m):t;return o()(o()({},r),{},{style:o()(o()({},r==null?void 0:r.style),v)})};return s}function cn(n){var e=n.rowClassName,t=n.showStripe,s=n.showHover,i=n.showHorizontalBorder,a=function(){for(var u=arguments.length,r=new Array(u),v=0;v<u;v++)r[v]=arguments[v];var g=r[1];return q()("".concat(x,"-row"),E()(E()(E()({},"".concat(x,"-row-stripe"),!!t&&(0,J.b2)(g+1)),"".concat(x,"-row-hover"),!!s),"".concat(x,"-row-border-none"),!i),typeof e=="function"?e==null?void 0:e.apply(void 0,r):e)};return a}var vn=["isReady","isSort","fillSpace","showStripe","showHover","showHorizontalBorder","showToolbar","autoRequest","formRef","tableRef","defaultRequestParams","requestOptions","request","requestCacheKey","requestBefore","requestFinally","requestSuccess","requestFirstSuccess","formInitialValues","queryFormProps","formCardProps","tableCardProps","tableExtra","tableRender","emptyRender","toolbarActionConfig","toolbarRender","toolbarLeft","toolbarRight","fullScreenBgColor","contentRender","formItems","tableHeaderRender","rootClassName","rootStyle","toolbarStyle","headerRowStyle","rowStyle","headerCellStyle","cellStyle","loading","size","columns","pagination","components"],x="lightd-table",Pe="".concat(x,"-card"),mn={maxHeight:"86%"},fn=function(e){var t,s=e.isReady,i=s===void 0?!0:s,a=e.isSort,m=a===void 0?!1:a,u=e.fillSpace,r=u===void 0?!1:u,v=e.showStripe,g=v===void 0?!1:v,M=e.showHover,y=M===void 0?!1:M,P=e.showHorizontalBorder,I=P===void 0?!0:P,A=e.showToolbar,h=A===void 0?!0:A,F=e.autoRequest,S=F===void 0?!0:F,p=e.formRef,B=e.tableRef,R=e.defaultRequestParams,c=R===void 0?te.FD:R,N=e.requestOptions,H=N===void 0?te.FD:N,C=e.request,O=C===void 0?Ae()(Re()().mark(function b(){return Re()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:case"end":return T.stop()}},b)})):C,Z=e.requestCacheKey,me=e.requestBefore,Ge=e.requestFinally,gn=e.requestSuccess,yn=e.requestFirstSuccess,To=e.formInitialValues,L=e.queryFormProps,zo=e.formCardProps,fe=e.tableCardProps,Ko=e.tableExtra,No=e.tableRender,Qe=e.emptyRender,Zo=e.toolbarActionConfig,Cn=Zo===void 0?te.FD:Zo,$o=e.toolbarRender,Xe=e.toolbarLeft,Mo=e.toolbarRight,Ho=e.fullScreenBgColor,Sn=Ho===void 0?"#fff":Ho,re=e.contentRender,Lo=e.formItems,se=Lo===void 0?te.ow:Lo,jo=e.tableHeaderRender,Rn=e.rootClassName,pn=e.rootStyle,Wo=e.toolbarStyle,bn=e.headerRowStyle,ke=e.rowStyle,Dn=e.headerCellStyle,_e=e.cellStyle,Pn=e.loading,Fn=e.size,Uo=e.columns,En=Uo===void 0?te.ow:Uo,Y=e.pagination,eo=e.components,G=ne()(e,vn),Vo=e.dataSource,W=!!Vo,he=(0,f.useRef)(null),Jo=(0,f.useRef)(null),Bo=(0,f.useRef)(To),xn=(0,io.Z)(he,{onExit:function(){return Yo()}}),qo=oe()(xn,2),oo=qo[0],Yo=qo[1].toggleFullscreen,Q=(0,f.useRef)(),In=(0,V.Z)(function(b){Q.current=b,p&&(typeof p=="function"?p==null||p(b):p.current=b)}),Tn=(0,f.useMemo)(function(){return oo?{backgroundColor:Sn}:{}},[oo]),ee=(0,f.useMemo)(function(){return(se==null?void 0:se.length)>0},[se==null?void 0:se.length]),w=an(Cn),Go=Io(Y),ge=Go.outDefaultCurrent,Te=Go.outDefaultPageSize,Fe=rn({hasDataSource:W,request:O,requestCacheKey:Z,requestOptions:H,requestBefore:me,requestSuccess:gn,requestFirstSuccess:yn,requestFinally:Ge,outDefaultCurrent:ge,outDefaultPageSize:Te}),Qo=Fe.params,ye=Fe.data,ue=Fe.run,Mn=Fe.loading,jn=Fe.mutate,j=Fe.pagination,Me=Ye(Mn,Pn),Bn=qe(Fn),Xo=oe()(Bn,2),je=Xo[0],wn=Xo[1],no=xo({contentRender:re,isSort:m,paginationAction:j,columns:En,toolbarActionConfig:w,headerCellStyle:Dn,cellStyle:_e}),Be=no.finalColumns,An=no.columnKeys,On=no.setColumnKeys,zn=no.outColumns,Kn=(0,V.Z)(function(b){if(!W){var D;if(ee)if((L==null?void 0:L.isAntdReset)===!1){var T,U;D=Bo.current,(T=Q.current)===null||T===void 0||T.setFieldsValue(o()({},(U=Bo.current)!==null&&U!==void 0?U:{}))}else{var we,Oo;(we=Q.current)===null||we===void 0||we.resetFields(),D=(Oo=Q.current)===null||Oo===void 0?void 0:Oo.getFieldsValue()}ue(o()(o()({},b),{},{current:ge,pageSize:Te,formValues:D}),"onReset")}}),Nn=(0,V.Z)(function(b){var D;if(!W){var T=ee?(D=Q.current)===null||D===void 0?void 0:D.getFieldsValue():void 0;ue(o()(o()({},b),{},{current:ge,pageSize:j==null?void 0:j.pageSize,formValues:T}),"onSearch")}}),ko=(0,V.Z)(function(b){var D;if(!W){var T=ee?(D=Q.current)===null||D===void 0?void 0:D.getFieldsValue():void 0;ue(o()(o()({},b),{},{current:j==null?void 0:j.current,pageSize:j==null?void 0:j.pageSize,formValues:T}),"onReload")}}),Zn=(0,V.Z)(function(b,D){var T;if(!W){var U=ee?(T=Q.current)===null||T===void 0?void 0:T.getFieldsValue():void 0;ue({current:b,pageSize:D,formValues:U},"onReload")}}),$n=(0,V.Z)(function(b){var D;L==null||(D=L.onFinish)===null||D===void 0||D.call(L,b),!W&&ue({current:ge,pageSize:j==null?void 0:j.pageSize,formValues:b},"onSearch")}),Hn=(0,V.Z)(function(b){var D,T;if(L==null||(D=L.onReset)===null||D===void 0||D.call(L,b),!W){var U=ee?(T=Q.current)===null||T===void 0?void 0:T.getFieldsValue():void 0;ue({current:ge,pageSize:Te,formValues:U},"onReset")}}),Ln=(0,V.Z)(function(){var b,D=arguments.length>0&&arguments[0]!==void 0?arguments[0]:ge,T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Te,U=arguments.length>2?arguments[2]:void 0;if(!W){var we=ee?(b=Q.current)===null||b===void 0?void 0:b.getFieldsValue():void 0;ue(o()(o()({},U),{},{current:D,pageSize:T,formValues:we}),"onCustomSearch")}}),Ce=ye!=null&&(t=ye.list)!==null&&t!==void 0&&t.length?ye.list:W?Vo:[];Je({tablecardref:Jo,fillSpace:r,tableData:Ce});var Wn=un({onHeaderRow:G==null?void 0:G.onHeaderRow,showHorizontalBorder:I,headerRowStyle:bn}),Un=dn({onRow:G==null?void 0:G.onRow,rowStyle:ke}),Vn=cn({rowClassName:G==null?void 0:G.rowClassName,showStripe:g,showHover:y,showHorizontalBorder:I});sn({autoRequest:S,run:ue,isReady:i,hasDataSource:W,outDefaultCurrent:ge,outDefaultPageSize:Te,hasFromItems:ee,outRequestCacheKey:Z,requestCacheParams:Qo,requestOptions:H,defaultRequestParams:c,queryFormRef:Q}),(0,f.useImperativeHandle)(B,function(){return{onReload:ko,onReset:Kn,onSearch:Nn,onCustomSearch:Ln,rootRef:he,params:Qo,tableData:Ce,setTableData:jn,pagination:j}});var _o=(0,f.useMemo)(function(){if(!ee)return null;var b=je==="large"?"middle":je;return(0,d.jsx)(le,o()(o()({size:b,isReady:i,loading:Me.spinning,initialValues:To},L),{},{onFinish:$n,onReset:Hn,formItems:se,cardProps:zo,ref:In,_formInitValRef:Bo}))},[ee,je,i,Me==null?void 0:Me.spinning,zo,To,se,L]),wo=(0,f.useMemo)(function(){return w===!1?null:(0,d.jsx)(Po,o()(o()({},w),{},{showColumnSetting:re?!1:w==null?void 0:w.showColumnSetting,showDensity:re?!1:w==null?void 0:w.showDensity,className:q()("".concat(x,"-toolbar-action"),w==null?void 0:w.className)}))},[w]),Ao=(0,f.useMemo)(function(){return!h||w===!1&&!Xe&&!Mo?null:(0,d.jsxs)("div",{className:"".concat(x,"-toolbar"),style:Wo,children:[(0,d.jsx)("div",{className:"".concat(x,"-toolbar-left"),children:Xe&&(0,d.jsx)(pe.Z,{children:Xe})}),(0,d.jsx)("div",{className:"".concat(x,"-toolbar-right"),children:(0,d.jsxs)(pe.Z,{children:[Mo,wo]})})]})},[h,w,Xe,Mo,JSON.stringify(Wo)]),en=(0,d.jsxs)(Oe.Z,o()(o()({ref:Jo,bordered:!1},fe),{},{style:o()(E()(E()({},"--".concat(Pe,"-stripe-bg"),typeof g=="string"?g:"#fafafa"),"--".concat(Pe,"-hover-bg"),typeof y=="string"?y:"#fafafa"),fe==null?void 0:fe.style),className:q()(Pe,E()(E()(E()({},"".concat(Pe,"-stripe"),!!g),"".concat(Pe,"-hover"),!!y),"".concat(Pe,"-border-none"),!I),fe==null?void 0:fe.className),children:[$o?$o(wo,Ao):Ao,jo?jo(Be,Ce):null,(0,d.jsx)(co.Z,o()(o()({columns:Be,dataSource:ye==null?void 0:ye.list,size:je,showHeader:!jo&&!re,components:o()(o()({table:re?function(){return re==null?void 0:re(Ce)}:void 0},eo),{},{body:o()({cell:We,row:!(Ce!=null&&Ce.length)&&Qe?function(){return(0,d.jsx)("tr",{className:"".concat(x,"-row-empty-placeholder"),style:typeof ke=="function"?ke({},0):ke,children:(0,d.jsx)("td",{colSpan:(Be==null?void 0:Be.length)||1,className:"".concat(x,"-cell-empty"),style:typeof _e=="function"?_e({},0):_e,children:Qe==null?void 0:Qe()})})}:void 0},eo==null?void 0:eo.body)}),pagination:Y!==!1?o()(o()({showTotal:Le,showSizeChanger:!0,current:W||j==null?void 0:j.current,pageSize:W||j==null?void 0:j.pageSize,total:W||j==null?void 0:j.total},Y),{},{onChange:function(D,T){var U;Y==null||(U=Y.onChange)===null||U===void 0||U.call(Y,D,T),Zn(D,T)},className:q()("".concat(x,"-pagination"),Y==null?void 0:Y.className)}):!1},G),{},{onHeaderRow:Wn,onRow:Un,rowClassName:Vn}))]})),on=(0,d.jsx)(vo.Z,o()(o()({style:mn},Me),{},{children:en})),nn=(0,d.jsxs)("div",{ref:he,style:o()(o()({},Tn),pn),className:q()(x,Rn,E()({},"".concat(x,"-full-screen"),oo)),children:[_o,Ko,on]}),tn=(0,d.jsx)(ie.Provider,{value:{reload:ko,size:je,setSize:wn,outColumns:zn,columnKeys:An,setColumnKeys:On,rootRef:he,isFullScreen:oo,toggleFullscreen:Yo},children:No?No({searchFormDom:_o,toolbarActionDom:wo,toolbarDom:Ao,tableExtraDom:Ko,tableCardDom:en,tableDom:on,finallyDom:nn},e):nn});return typeof w!="boolean"&&!(w!=null&&w.showFullscreen)||w===!1?(0,d.jsx)(be.ZP,{locale:K.Z,children:tn}):(0,d.jsxs)(be.ZP,{locale:K.Z,getPopupContainer:function(){return(he==null?void 0:he.current)||document.body},children:[tn,e==null?void 0:e.children]})},hn=fn}}]);
