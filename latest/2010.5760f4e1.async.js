(self.webpackChunklighting_design=self.webpackChunklighting_design||[]).push([[2010],{45367:function(nn,ye,t){"use strict";var eo=t(97857),E=t.n(eo),oo=t(5574),o=t.n(oo),no=t(13769),_=t.n(no),to=t(80882),Ce=t(22638),lo=t(9361),we=t(48997),ao=t(71230),ee=t(15746),ro=t(42075),W=t(93967),Se=t.n(W),Ae=t(89889),so=t(61117),uo=t(40964),Re=t(67294),K=t(85893),X=t(91874),V=t.n(X);t.o(X,"excel2Json")&&t.d(ye,{excel2Json:function(){return X.excel2Json}}),t.o(X,"getExcelData")&&t.d(ye,{getExcelData:function(){return X.getExcelData}}),t.o(X,"json2Excel")&&t.d(ye,{json2Excel:function(){return X.json2Excel}});var oe=["layout","submitter","isCollapsed","isEnterSubmit","isApproachLastItem","isSpace","showColsNumber","className","formItemBottom","itemColProps","gutter","onCollapsedChange"],h=["ownColSpans"],io=lo.Z.useToken,se=we.Z.Link,Pe="lightd-form-query",U={xs:24,sm:24,md:12,lg:8,xl:8,xxl:6},co={display:"flex",flex:"1",flexWrap:"wrap"},d=(0,Re.memo)(function(N){var ne=N.collapsed,Y=N.onToggle,Z=(0,Ce.Z)(function(){Y==null||Y(!ne)}),pe=io(),ue=pe.token;return(0,K.jsxs)(se,{onClick:Z,className:"".concat(Pe,"-collapse"),style:{whiteSpace:"nowrap",color:ue==null?void 0:ue.colorPrimary,display:"flex",justifyContent:"center",alignItems:"center"},children:[ne?"\u5C55\u5F00":"\u6536\u8D77",(0,K.jsx)(to.Z,{style:{marginLeft:5,transition:"0.3s all",transform:"rotate(".concat(ne?0:180,"deg)")}})]})});function vo(N){var ne=N.layout,Y=ne===void 0?"horizontal":ne,Z=N.submitter,pe=N.isCollapsed,ue=pe===void 0?!0:pe,ie=N.isEnterSubmit,Oe=ie===void 0?!0:ie,ze=N.isApproachLastItem,mo=ze===void 0?!1:ze,Ne=N.isSpace,fo=Ne===void 0?!1:Ne,Fe=N.showColsNumber,ho=N.className,Ke=N.formItemBottom,Ze=N.itemColProps,go=Ze===void 0?uo.FD:Ze,$e=N.gutter,yo=$e===void 0?16:$e,Ee=N.onCollapsedChange,Co=_()(N,oe),So=fo||Y==="inline",Ro=(0,Re.useState)(ue),He=o()(Ro,2),Le=He[0],po=He[1];return(0,K.jsx)(Ae.Z,E()({formItemBottom:Ke,isEnterSubmit:Oe,layout:Y,submitter:Z===void 0||Z?E()(E()({submitText:"\u67E5\u8BE2"},Z),{},{submitButtonProps:E()(E()({},Z==null?void 0:Z.submitButtonProps),{},{htmlType:Oe?"submit":"button"})}):!1,className:Se()(Pe,ho),contentRender:function(te,Do){var We=typeof Fe=="number"&&Fe<(te==null?void 0:te.length),Po=So?{}:E()(E()({},U),go);return(0,K.jsxs)(ao.Z,{gutter:yo,children:[(0,K.jsx)(K.Fragment,{children:te==null?void 0:te.map(function(J,de){var Ue=J.props,Ve=Ue.ownColSpans,Fo=Ve===void 0?{}:Ve,Eo=_()(Ue,h),Je=Le&&We&&de>=Fe;return(0,K.jsx)(ee.Z,E()(E()(E()({},Po),Fo),{},{style:Je?{display:"none"}:{},children:(0,Re.cloneElement)(J,E()({hidden:Je},Eo))}),(J==null?void 0:J.key)||J.name+de.toString())})}),(0,K.jsx)(K.Fragment,{children:Z!==!1&&(0,K.jsx)(ee.Z,{style:E()(E()({},co),{},{alignItems:Y==="vertical"?"flex-end":"flex-start",justifyContent:"flex-".concat(mo?"start":"end")}),children:(0,K.jsx)(so.default,{colon:!1,className:Se()("".concat(Pe,"-submitter")),style:E()({marginBottom:Ke},Z?Z==null?void 0:Z.style:{}),children:(0,K.jsxs)(ro.Z,{children:[Do,We&&(0,K.jsx)(d,{collapsed:Le,onToggle:function(de){po(de),Ee==null||Ee(de)}})]})})})})]})}},Co))}ye.default=vo},91874:function(){},2010:function(nn,ye,t){"use strict";t.d(ye,{F:function(){return I},Z:function(){return fn}});var eo=t(9783),E=t.n(eo),oo=t(97857),o=t.n(oo),no=t(5574),_=t.n(no),to=t(15009),Ce=t.n(to),lo=t(99289),we=t.n(lo),ao=t(13769),ee=t.n(ao),ro=t(28699),W=t(22638),Se=t(42075),Ae=t(4393),so=t(10237),uo=t(75081),Re=t(28459),K=t(81354),X=t(93967),V=t.n(X),oe=t(40964),h=t(67294),io=(0,h.createContext)({}),se=io,Pe=t(45367),U=t(33168),co=t(4390),d=t(85893),vo=["formItems","cardProps","name","loading","isReady","submitter"],N=(0,h.forwardRef)(function(n,e){var l,s,i,r,m=n.formItems,u=m===void 0?[]:m,a=n.cardProps,v=n.name,S=n.loading,R=n.isReady,C=n.submitter,B=ee()(n,vo),x=co.Z.useForm(),A=_()(x,1),y=A[0];(0,h.useImperativeHandle)(e,function(){return y});var T=(0,h.useMemo)(function(){return v||(0,U.EL)("lightd-table-search-form")},[v]),F=(0,h.useMemo)(function(){return(u==null?void 0:u.length)<=0?[]:u==null?void 0:u.map(function(c,w){var g,p;return(0,h.cloneElement)(c,{key:(c==null?void 0:c.key)||(c==null||(g=c.props)===null||g===void 0?void 0:g.key)||(c==null||(p=c.props)===null||p===void 0?void 0:p.name)+w.toString()})})},[u]);if((u==null?void 0:u.length)<=0)return null;var f=U.Jj?{styles:o()(o()({},a==null?void 0:a.styles),{},{body:o()({paddingBottom:0},(l=a==null?void 0:a.bodyStyle)!==null&&l!==void 0?l:a==null||(s=a.styles)===null||s===void 0?void 0:s.body)})}:{bodyStyle:o()({paddingBottom:0},(i=a==null?void 0:a.bodyStyle)!==null&&i!==void 0?i:a==null||(r=a.styles)===null||r===void 0?void 0:r.body)};return(0,d.jsx)(Ae.Z,o()(o()(o()({bordered:!1},a),{},{className:V()("".concat(I,"-form-card"),a==null?void 0:a.className),style:o()({marginBottom:16},a==null?void 0:a.style)},f),{},{children:(0,d.jsx)(Pe.default,o()(o()({form:y,name:T,loading:S,isReady:R},B),{},{submitter:C===void 0||C?o()(o()({},C),{},{resetButtonProps:o()({disabled:S||!R},C==null?void 0:C.resetButtonProps),submitButtonProps:o()({loading:!1,disabled:S||!R},C==null?void 0:C.submitButtonProps)}):!1,children:F}))}))}),ne=N,Y=t(33160),Z=t(11713),pe=t(27732),ue=t(19632),ie=t.n(ue),Oe=t(42952),ze=t(74627),mo=t(84567),Ne=t(20863),fo=function(e){var l=e.onColumnIconChange,s=(0,h.useContext)(se),i=s.outColumns,r=i===void 0?[]:i,m=s.columnKeys,u=m===void 0?[]:m,a=s.setColumnKeys,v=(0,h.useMemo)(function(){return r.map(function(x,A){return{key:(0,U.hW)(x,A),title:x.title||""}})},[r]),S=(0,h.useMemo)(function(){return u.length>0&&u.length!==r.length},[u,r]),R=(0,h.useMemo)(function(){return u.length===r.length},[u,r]),C=(0,W.Z)(function(x){a(ie()(x)),l==null||l(ie()(x))}),B=(0,W.Z)(function(x){if(x.target.checked){var A=r.map(U.hW);a(A)}else a([])});return(0,d.jsx)(d.Fragment,{children:(0,d.jsx)(ze.Z,{title:(0,d.jsx)(mo.Z,{indeterminate:S,onChange:B,checked:R,style:{height:"32px",lineHeight:"32px"},children:"\u5168\u9009"}),content:(0,d.jsx)(Ne.Z,{checkable:!0,selectable:!1,blockNode:!0,onCheck:C,treeData:v,checkedKeys:u,className:"".concat(I,"-column-setting-tree")}),arrow:!1,placement:"bottomRight",trigger:["click"],overlayClassName:"".concat(I,"-column-setting-overlay"),children:(0,d.jsx)(Oe.Z,{title:"\u5217\u8BBE\u7F6E"})})})},Fe=fo,ho=t(68869),Ke=t(83159),Ze=[{label:"\u9ED8\u8BA4",key:"large"},{label:"\u4E2D\u7B49",key:"middle"},{label:"\u7D27\u51D1",key:"small"}],go=function(e){var l=e.onDensityIconChange,s=(0,h.useContext)(se),i=s.size,r=s.setSize;return(0,d.jsx)(Ke.Z,{overlayClassName:"".concat(I,"-density-icon-overlay"),placement:"bottom",trigger:["click"],menu:{style:{width:80},selectedKeys:[i||"large"],onClick:function(u){var a=u.key;r==null||r(a),l==null||l(a)},items:Ze},children:(0,d.jsx)(ho.Z,{title:"\u8868\u683C\u5BC6\u5EA6"})})},$e=go,yo=["showReload","showColumnSetting","showDensity","showFullscreen","orders","onReloadIconChange","onColumnIconChange","onDensityIconChange","onFullscreenIconChange","render","style"],Ee=["onMouseEnter","onMouseLeave"],Co=function(e){var l=e.onReloadIconChange,s=(0,h.useContext)(se),i=s.reload;return(0,d.jsx)(Y.Z,{title:"\u5237\u65B0\u8868\u683C",onClick:function(){i==null||i(),l==null||l()}})},So=function(e){var l=e.onFullscreenIconChange,s=(0,h.useContext)(se),i=s.toggleFullscreen,r=s.isFullScreen;return(0,d.jsx)(d.Fragment,{children:r?(0,d.jsx)(Z.Z,{title:"\u9000\u51FA\u5168\u5C4F",onClick:function(){i(),l==null||l(!1)}}):(0,d.jsx)(pe.Z,{title:"\u8FDB\u5165\u5168\u5C4F",onClick:function(){i(),l==null||l(!0)}})})},Ro=function(e){var l=e.showReload,s=l===void 0?!0:l,i=e.showColumnSetting,r=i===void 0?!0:i,m=e.showDensity,u=m===void 0?!0:m,a=e.showFullscreen,v=a===void 0?!0:a,S=e.orders,R=S===void 0?{reload:0,density:1,fullscreen:2,columnSetting:3}:S,C=e.onReloadIconChange,B=e.onColumnIconChange,x=e.onDensityIconChange,A=e.onFullscreenIconChange,y=e.render,T=e.style,F=T===void 0?oe.FD:T,f=ee()(e,yo),c=(0,h.useMemo)(function(){var w=[];return s&&w.push({key:R.reload||0,dom:(0,d.jsx)(Co,{onReloadIconChange:C},"ReloadIcon")}),u&&w.push({key:R.density||1,dom:(0,d.jsx)($e,{onDensityIconChange:x},"DensityIcon")}),v&&w.push({key:R.fullscreen||2,dom:(0,d.jsx)(So,{onFullscreenIconChange:A},"FullscreenIcon")}),r&&w.push({key:R.columnSetting||3,dom:(0,d.jsx)(Fe,{onColumnIconChange:B},"ColumnSetting")}),w.toSorted(function(g,p){return g.key-p.key}).map(function(g){return g.dom})},[s,u,v,r,JSON.stringify(R)]);return(0,d.jsx)(Se.Z,o()(o()({size:10},f),{},{style:o()({fontSize:16},F),children:y?y==null?void 0:y(c):c}))},He=function(e,l){return(0,d.jsx)("span",{className:"".concat(I,"-pagination-show-total"),children:"\u5F53\u524D\u663E\u793A".concat(l[0],"-").concat(l[1],"\u6761\uFF0C\u5171 ").concat(e," \u6761\u6570\u636E")})},Le=function(e){var l=e.onMouseEnter,s=e.onMouseLeave,i=ee()(e,Ee);return(0,d.jsx)("td",o()({},i))},po=Ro,bo=t(27347),te=t(47811),Do=t(42170),We=t(15479),Po=t(83062),J=t(37514),de=t(22028),Ue=["data"];function Ve(n){var e=n.tablecardref,l=n.fillSpace,s=n.tableData;(0,h.useLayoutEffect)(function(){if(l!==void 0&&e.current){var i=e.current,r=i==null?void 0:i.querySelector("div.ant-table");if(r){if(l!==!0&&typeof l!="number"){r.style.height="auto";return}var m,u=l===!0?1:l+1,a=r.getBoundingClientRect(),v=a.bottom,S=a.height,R=i.getBoundingClientRect(),C=R.bottom,B=window.innerHeight-v;B<=0||(B-u>0?m=B+S-u-(C-v):m=B+S-(C-v),r.style.height="".concat(Math.floor(m),"px"),r.style.overflow="auto")}}},[l,s==null?void 0:s.length])}function Fo(n){var e=(0,bo.Z)(function(){return n}),l=_()(e,2),s=l[0],i=l[1];return(0,te.Z)(function(){return i(n)},[n]),[s,i]}function Eo(n){var e=n.contentRender,l=n.isSort,s=n.paginationAction,i=n.columns,r=n.toolbarActionConfig,m=n.headerCellStyle,u=n.cellStyle,a=(0,h.useMemo)(function(){if(e)return[];var x=i||[];if(l){var A=s.current,y=s.pageSize,T=function(c,w,g){var p,O=(A-1)*(y||0)+g+1;return(0,U.mf)(l==null?void 0:l.render)?l==null||(p=l.render)===null||p===void 0?void 0:p.call(l,O,c,w,g):O},F=o()(o()({title:"\u5E8F\u53F7",align:"center",width:80},(0,J.Z)(l)?l:{}),{},{render:T,dataIndex:"_LTABLE_SERIAL_NUMNER_COLUMN_"});x=[F].concat(ie()(i))}return x.map(function(f){var c=o()(o()({},f),{},{onHeaderCell:function(g){var p,O=(f==null||(p=f.onHeaderCell)===null||p===void 0?void 0:p.call(f,g))||{},b=typeof m=="function"?m(g):m;return o()(o()({},O),{},{style:o()(o()({},O==null?void 0:O.style),b),className:V()("".concat(I,"-header-cell"),O==null?void 0:O.className)})},onCell:function(g,p){var O,b=(f==null||(O=f.onCell)===null||O===void 0?void 0:O.call(f,g,p))||{},ce=typeof u=="function"?u(g,p):u;return o()(o()({},b),{},{style:o()(o()({},b==null?void 0:b.style),ce),className:V()("".concat(I,"-cell"),b==null?void 0:b.className)})}});return c.toolTip&&!c.ellipsis?o()(o()({},c),{},{ellipsis:{showTitle:!1},render:function(g,p,O){var b,ce,xe=(b=(ce=p==null?void 0:p[c==null?void 0:c.dataIndex])!==null&&ce!==void 0?ce:g)!==null&&b!==void 0?b:O;return(0,d.jsx)(Po.Z,o()(o()({placement:"topLeft",title:xe},(0,J.Z)(c.toolTip)?c.toolTip:{}),{},{children:c!=null&&c.render?c==null?void 0:c.render(g,p,O):xe}))}}):c})},[i,s==null?void 0:s.current,s==null?void 0:s.pageSize]),v=(0,bo.Z)(function(){return e||r===!1||!(r!=null&&r.showColumnSetting)?[]:a.map(U.hW)}),S=_()(v,2),R=S[0],C=S[1];(0,Do.Z)(function(){e||C(a.map(U.hW))},[a]);var B=(0,h.useMemo)(function(){if(e)return[];if(r===!1||!(r!=null&&r.showColumnSetting))return a;var x=a.filter(function(A,y){return R==null?void 0:R.includes((0,U.hW)(A,y))});return x},[R.join(""),typeof r=="boolean"&&r,typeof r!="boolean"&&(r==null?void 0:r.showColumnSetting)]);return{finalColumns:B,columnKeys:R,setColumnKeys:C,outColumns:a}}function Je(n){var e=(0,h.useMemo)(function(){return n&&n.defaultCurrent||1},[]),l=(0,h.useMemo)(function(){return n&&n.defaultPageSize||10},[]);return{outDefaultCurrent:e,outDefaultPageSize:l}}function tn(n,e){return(0,h.useMemo)(function(){return e===void 0?{spinning:n}:typeof e=="boolean"?{spinning:e}:o()({spinning:n},e)},[typeof e=="boolean"?e:e==null?void 0:e.spinning,n])}function ln(n){var e=typeof n=="boolean"?!1:(0,de.Z)(n,["split"]);return(0,h.useMemo)(function(){return n?o()({showReload:!0,showColumnSetting:!0,showDensity:!0,showFullscreen:!0},n):!1},[JSON.stringify(e)])}function an(n){var e=n.hasDataSource,l=n.request,s=n.requestOptions,i=n.requestCacheKey,r=n.requestBefore,m=n.requestSuccess,u=n.requestFirstSuccess,a=n.requestFinally,v=n.outDefaultCurrent,S=n.outDefaultPageSize,R=(0,h.useRef)(!0),C=(0,We.Z)(we()(Ce()().mark(function A(){var y,T,F,f,c,w,g,p=arguments;return Ce()().wrap(function(b){for(;;)switch(b.prev=b.next){case 0:if(!e){b.next=2;break}return b.abrupt("return",{list:[],total:0});case 2:for(y=p.length,T=new Array(y),F=0;F<y;F++)T[F]=p[F];return f=T[0],c=T[1],w=T.slice(2),b.next=6,l.apply(void 0,[o()(o()({},f),r?r==null?void 0:r.apply(void 0,T):{}),c].concat(ie()(w)));case 6:if(g=b.sent,!(g!=null&&g.success&&Array.isArray(g.data)&&g.data.length)){b.next=9;break}return b.abrupt("return",{list:g.data,total:+g.total});case 9:return b.abrupt("return",{list:[],total:0});case 10:case"end":return b.stop()}},A)})),o()(o()({defaultCurrent:v,defaultPageSize:S,cacheKey:i},s),{},{manual:!0,onSuccess:function(){for(var y,T=arguments.length,F=new Array(T),f=0;f<T;f++)F[f]=arguments[f];R.current&&(u==null||u.apply(void 0,F)),R.current=!1,m==null||m.apply(void 0,F),s==null||(y=s.onSuccess)===null||y===void 0||y.call.apply(y,[s].concat(F))},onFinally:function(){for(var y,T=arguments.length,F=new Array(T),f=0;f<T;f++)F[f]=arguments[f];a==null||a.apply(void 0,F),s==null||(y=s.onFinally)===null||y===void 0||y.call.apply(y,[s].concat(F))}})),B=C.data,x=ee()(C,Ue);return o()({data:B||{list:[],total:0}},x)}function rn(n){var e=n.autoRequest,l=n.isReady,s=n.hasDataSource,i=n.outDefaultCurrent,r=n.outDefaultPageSize,m=n.hasFromItems,u=n.outRequestCacheKey,a=n.requestCacheParams,v=n.requestOptions,S=n.defaultRequestParams,R=n.run,C=n.queryFormRef;(0,h.useEffect)(function(){if(!(!e||!l||s)){var B,x=i,A=r;if(m){var y;B=(y=C.current)===null||y===void 0?void 0:y.getFieldsValue()}var T=u||(v==null?void 0:v.cacheKey);if(T&&a[0]){var F=a[0],f=F.current,c=F.pageSize,w=F.formValues;if(x=f,A=c,m&&w){var g;B=w,(g=C.current)===null||g===void 0||g.setFieldsValue(o()({},w))}}R(o()(o()({},S),{},{current:x,pageSize:A,formValues:B}),"onInit")}},[l])}function sn(n){var e=n.onHeaderRow,l=n.headerRowStyle,s=n.showHorizontalBorder,i=function(){for(var m=arguments.length,u=new Array(m),a=0;a<m;a++)u[a]=arguments[a];var v=typeof e=="function"?e.apply(void 0,u):{},S=typeof l=="function"?l==null?void 0:l.apply(void 0,u):l;return o()(o()({},v),{},{className:V()("".concat(I,"-header-row"),E()({},"".concat(I,"-header-row-border-none"),!s),v==null?void 0:v.className),style:o()(o()({},v==null?void 0:v.style),S)})};return i}function un(n){var e=n.onRow,l=n.rowStyle,s=function(){for(var r=arguments.length,m=new Array(r),u=0;u<r;u++)m[u]=arguments[u];var a=typeof e=="function"?e.apply(void 0,m):{},v=typeof l=="function"?l==null?void 0:l.apply(void 0,m):l;return o()(o()({},a),{},{style:o()(o()({},a==null?void 0:a.style),v)})};return s}function dn(n){var e=n.rowClassName,l=n.showStripe,s=n.showHover,i=n.showHorizontalBorder,r=function(){for(var u=arguments.length,a=new Array(u),v=0;v<u;v++)a[v]=arguments[v];var S=a[1];return V()("".concat(I,"-row"),E()(E()(E()({},"".concat(I,"-row-stripe"),!!l&&(0,U.b2)(S+1)),"".concat(I,"-row-hover"),!!s),"".concat(I,"-row-border-none"),!i),typeof e=="function"?e==null?void 0:e.apply(void 0,a):e)};return r}var cn=["isReady","isSort","fillSpace","showStripe","showHover","showHorizontalBorder","showToolbar","autoRequest","formRef","tableRef","defaultRequestParams","requestOptions","request","requestCacheKey","requestBefore","requestFinally","requestSuccess","requestFirstSuccess","formInitialValues","queryFormProps","formCardProps","tableCardProps","tableExtra","tableRender","emptyRender","toolbarActionConfig","toolbarRender","toolbarLeft","toolbarRight","fullScreenBgColor","contentRender","formItems","tableHeaderRender","rootClassName","rootStyle","toolbarStyle","headerRowStyle","rowStyle","headerCellStyle","cellStyle","loading","size","columns","pagination","components"],I="lightd-table",be="".concat(I,"-card"),vn={maxHeight:"86%"},mn=function(e){var l,s=e.isReady,i=s===void 0?!0:s,r=e.isSort,m=r===void 0?!1:r,u=e.fillSpace,a=u===void 0?!1:u,v=e.showStripe,S=v===void 0?!1:v,R=e.showHover,C=R===void 0?!1:R,B=e.showHorizontalBorder,x=B===void 0?!0:B,A=e.showToolbar,y=A===void 0?!0:A,T=e.autoRequest,F=T===void 0?!0:T,f=e.formRef,c=e.tableRef,w=e.defaultRequestParams,g=w===void 0?oe.FD:w,p=e.requestOptions,O=p===void 0?oe.FD:p,b=e.request,ce=b===void 0?we()(Ce()().mark(function D(){return Ce()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:case"end":return M.stop()}},D)})):b,xe=e.requestCacheKey,hn=e.requestBefore,gn=e.requestFinally,yn=e.requestSuccess,Cn=e.requestFirstSuccess,xo=e.formInitialValues,$=e.queryFormProps,Ao=e.formCardProps,ve=e.tableCardProps,Oo=e.tableExtra,zo=e.tableRender,qe=e.emptyRender,No=e.toolbarActionConfig,Sn=No===void 0?oe.FD:No,Ko=e.toolbarRender,Ge=e.toolbarLeft,Io=e.toolbarRight,Zo=e.fullScreenBgColor,Rn=Zo===void 0?"#fff":Zo,le=e.contentRender,$o=e.formItems,ae=$o===void 0?oe.ow:$o,To=e.tableHeaderRender,pn=e.rootClassName,bn=e.rootStyle,Ho=e.toolbarStyle,Dn=e.headerRowStyle,Qe=e.rowStyle,Pn=e.headerCellStyle,Xe=e.cellStyle,Fn=e.loading,En=e.size,Lo=e.columns,xn=Lo===void 0?oe.ow:Lo,q=e.pagination,Ye=e.components,G=ee()(e,cn),Wo=e.dataSource,H=!!Wo,me=(0,h.useRef)(null),Uo=(0,h.useRef)(null),Mo=(0,h.useRef)(xo),In=(0,ro.Z)(me,{onExit:function(){return Jo()}}),Vo=_()(In,2),ke=Vo[0],Jo=Vo[1].toggleFullscreen,Q=(0,h.useRef)(),Tn=(0,W.Z)(function(D){Q.current=D,f&&(typeof f=="function"?f==null||f(D):f.current=D)}),Mn=(0,h.useMemo)(function(){return ke?{backgroundColor:Rn}:{}},[ke]),k=(0,h.useMemo)(function(){return(ae==null?void 0:ae.length)>0},[ae==null?void 0:ae.length]),z=ln(Sn),qo=Je(q),fe=qo.outDefaultCurrent,Ie=qo.outDefaultPageSize,De=an({hasDataSource:H,request:ce,requestCacheKey:xe,requestOptions:O,requestBefore:hn,requestSuccess:yn,requestFirstSuccess:Cn,requestFinally:gn,outDefaultCurrent:fe,outDefaultPageSize:Ie}),Go=De.params,he=De.data,re=De.run,jn=De.loading,Bn=De.mutate,j=De.pagination,Te=tn(jn,Fn),wn=Fo(En),Qo=_()(wn,2),Me=Qo[0],An=Qo[1],_e=Eo({contentRender:le,isSort:m,paginationAction:j,columns:xn,toolbarActionConfig:z,headerCellStyle:Pn,cellStyle:Xe}),je=_e.finalColumns,On=_e.columnKeys,zn=_e.setColumnKeys,Nn=_e.outColumns,Kn=(0,W.Z)(function(D){if(!H){var P;if(k)if(($==null?void 0:$.isAntdReset)===!1){var M,L;P=Mo.current,(M=Q.current)===null||M===void 0||M.setFieldsValue(o()({},(L=Mo.current)!==null&&L!==void 0?L:{}))}else{var Be,wo;(Be=Q.current)===null||Be===void 0||Be.resetFields(),P=(wo=Q.current)===null||wo===void 0?void 0:wo.getFieldsValue()}re(o()(o()({},D),{},{current:fe,pageSize:Ie,formValues:P}),"onReset")}}),Zn=(0,W.Z)(function(D){var P;if(!H){var M=k?(P=Q.current)===null||P===void 0?void 0:P.getFieldsValue():void 0;re(o()(o()({},D),{},{current:fe,pageSize:j==null?void 0:j.pageSize,formValues:M}),"onSearch")}}),Xo=(0,W.Z)(function(D){var P;if(!H){var M=k?(P=Q.current)===null||P===void 0?void 0:P.getFieldsValue():void 0;re(o()(o()({},D),{},{current:j==null?void 0:j.current,pageSize:j==null?void 0:j.pageSize,formValues:M}),"onReload")}}),$n=(0,W.Z)(function(D,P){var M;if(!H){var L=k?(M=Q.current)===null||M===void 0?void 0:M.getFieldsValue():void 0;re({current:D,pageSize:P,formValues:L},"onReload")}}),Hn=(0,W.Z)(function(D){var P;$==null||(P=$.onFinish)===null||P===void 0||P.call($,D),!H&&re({current:fe,pageSize:j==null?void 0:j.pageSize,formValues:D},"onSearch")}),Ln=(0,W.Z)(function(D){var P,M;if($==null||(P=$.onReset)===null||P===void 0||P.call($,D),!H){var L=k?(M=Q.current)===null||M===void 0?void 0:M.getFieldsValue():void 0;re({current:fe,pageSize:Ie,formValues:L},"onReset")}}),Wn=(0,W.Z)(function(){var D,P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:fe,M=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Ie,L=arguments.length>2?arguments[2]:void 0;if(!H){var Be=k?(D=Q.current)===null||D===void 0?void 0:D.getFieldsValue():void 0;re(o()(o()({},L),{},{current:P,pageSize:M,formValues:Be}),"onCustomSearch")}}),ge=he!=null&&(l=he.list)!==null&&l!==void 0&&l.length?he.list:H?Wo:[];Ve({tablecardref:Uo,fillSpace:a,tableData:ge});var Un=sn({onHeaderRow:G==null?void 0:G.onHeaderRow,showHorizontalBorder:x,headerRowStyle:Dn}),Vn=un({onRow:G==null?void 0:G.onRow,rowStyle:Qe}),Jn=dn({rowClassName:G==null?void 0:G.rowClassName,showStripe:S,showHover:C,showHorizontalBorder:x});rn({autoRequest:F,run:re,isReady:i,hasDataSource:H,outDefaultCurrent:fe,outDefaultPageSize:Ie,hasFromItems:k,outRequestCacheKey:xe,requestCacheParams:Go,requestOptions:O,defaultRequestParams:g,queryFormRef:Q}),(0,h.useImperativeHandle)(c,function(){return{onReload:Xo,onReset:Kn,onSearch:Zn,onCustomSearch:Wn,rootRef:me,params:Go,tableData:ge,setTableData:Bn,pagination:j}});var Yo=(0,h.useMemo)(function(){if(!k)return null;var D=Me==="large"?"middle":Me;return(0,d.jsx)(ne,o()(o()({size:D,isReady:i,loading:Te.spinning,initialValues:xo},$),{},{onFinish:Hn,onReset:Ln,formItems:ae,cardProps:Ao,ref:Tn,_formInitValRef:Mo}))},[k,Me,i,Te==null?void 0:Te.spinning,Ao,xo,ae,$]),jo=(0,h.useMemo)(function(){return z===!1?null:(0,d.jsx)(po,o()(o()({},z),{},{showColumnSetting:le?!1:z==null?void 0:z.showColumnSetting,showDensity:le?!1:z==null?void 0:z.showDensity,className:V()("".concat(I,"-toolbar-action"),z==null?void 0:z.className)}))},[z]),Bo=(0,h.useMemo)(function(){return!y||z===!1&&!Ge&&!Io?null:(0,d.jsxs)("div",{className:"".concat(I,"-toolbar"),style:Ho,children:[(0,d.jsx)("div",{className:"".concat(I,"-toolbar-left"),children:Ge&&(0,d.jsx)(Se.Z,{children:Ge})}),(0,d.jsx)("div",{className:"".concat(I,"-toolbar-right"),children:(0,d.jsxs)(Se.Z,{children:[Io,jo]})})]})},[y,z,Ge,Io,JSON.stringify(Ho)]),ko=(0,d.jsxs)(Ae.Z,o()(o()({ref:Uo,bordered:!1},ve),{},{style:o()(E()(E()({},"--".concat(be,"-stripe-bg"),typeof S=="string"?S:"#fafafa"),"--".concat(be,"-hover-bg"),typeof C=="string"?C:"#fafafa"),ve==null?void 0:ve.style),className:V()(be,E()(E()(E()({},"".concat(be,"-stripe"),!!S),"".concat(be,"-hover"),!!C),"".concat(be,"-border-none"),!x),ve==null?void 0:ve.className),children:[Ko?Ko(jo,Bo):Bo,To?To(je,ge):null,(0,d.jsx)(so.Z,o()(o()({columns:je,dataSource:he==null?void 0:he.list,size:Me,showHeader:!To&&!le,components:o()(o()({table:le?function(){return le==null?void 0:le(ge)}:void 0},Ye),{},{body:o()({cell:Le,row:!(ge!=null&&ge.length)&&qe?function(){return(0,d.jsx)("tr",{className:"".concat(I,"-row-empty-placeholder"),style:typeof Qe=="function"?Qe({},0):Qe,children:(0,d.jsx)("td",{colSpan:(je==null?void 0:je.length)||1,className:"".concat(I,"-cell-empty"),style:typeof Xe=="function"?Xe({},0):Xe,children:qe==null?void 0:qe()})})}:void 0},Ye==null?void 0:Ye.body)}),pagination:q!==!1?o()(o()({showTotal:He,showSizeChanger:!0,current:H||j==null?void 0:j.current,pageSize:H||j==null?void 0:j.pageSize,total:H||j==null?void 0:j.total},q),{},{onChange:function(P,M){var L;q==null||(L=q.onChange)===null||L===void 0||L.call(q,P,M),$n(P,M)},className:V()("".concat(I,"-pagination"),q==null?void 0:q.className)}):!1},G),{},{onHeaderRow:Un,onRow:Vn,rowClassName:Jn}))]})),_o=(0,d.jsx)(uo.Z,o()(o()({style:vn},Te),{},{children:ko})),en=(0,d.jsxs)("div",{ref:me,style:o()(o()({},Mn),bn),className:V()(I,pn,E()({},"".concat(I,"-full-screen"),ke)),children:[Yo,Oo,_o]}),on=(0,d.jsx)(se.Provider,{value:{reload:Xo,size:Me,setSize:An,outColumns:Nn,columnKeys:On,setColumnKeys:zn,rootRef:me,isFullScreen:ke,toggleFullscreen:Jo},children:zo?zo({searchFormDom:Yo,toolbarActionDom:jo,toolbarDom:Bo,tableExtraDom:Oo,tableCardDom:ko,tableDom:_o,finallyDom:en},e):en});return typeof z!="boolean"&&!(z!=null&&z.showFullscreen)||z===!1?(0,d.jsx)(Re.ZP,{locale:K.Z,children:on}):(0,d.jsxs)(Re.ZP,{locale:K.Z,getPopupContainer:function(){return(me==null?void 0:me.current)||document.body},children:[on,e==null?void 0:e.children]})},fn=mn}}]);
